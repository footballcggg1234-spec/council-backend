<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å - ‡∏™‡∏†‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</title>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* --- üé® PALETTE --- */
        :root {
            --primary: #a31818;      
            --secondary: #e6b800;    
            --secondary-light: #fff5cc;
            --dark: #4a0d0d;         
            --bg: #fdfbf7;           
            --white: #ffffff;
            --shadow: 0 4px 20px rgba(163, 24, 24, 0.08);
            --green-flag: #10b981;
        }

        body { font-family: 'Sarabun', sans-serif; margin: 0; background: var(--bg); color: #333; line-height: 1.6; }
        a { text-decoration: none; transition: 0.3s; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }

        /* Navbar */
        nav { background: var(--white); box-shadow: 0 2px 10px rgba(0,0,0,0.05); border-top: 5px solid var(--primary); position: sticky; top: 0; z-index: 100; }
        .nav-content { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; }
        .logo { font-size: 1.4rem; font-weight: 800; color: var(--primary); display: flex; align-items: center; gap: 10px; }
        .logo span { color: var(--secondary); }
        .menu { list-style: none; display: flex; gap: 15px; margin: 0; padding: 0; align-items: center; }
        .menu a { color: var(--dark); font-weight: 500; padding: 8px 12px; border-radius: 50px; font-size: 0.9rem; }
        .menu a:hover, .menu a.active { background: var(--secondary-light); color: var(--primary); }
        .btn-admin-nav { border: 1px solid var(--primary); color: var(--primary) !important; padding: 6px 15px !important; }
        .btn-admin-nav:hover { background: var(--primary) !important; color: white !important; }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://images.unsplash.com/photo-1541339907198-e08756dedf3f?auto=format&fit=crop&q=80');
            background-size: cover; background-position: center;
            padding: 80px 0 120px; text-align: center; color: white;
            border-bottom: 5px solid var(--secondary);
            margin-bottom: -60px;
        }
        .hero h1 { font-size: 2.5rem; margin: 0 0 10px; text-shadow: 2px 2px 10px rgba(0,0,0,0.5); }
        .btn-main {
            background: var(--secondary); color: var(--dark); padding: 10px 25px; 
            border-radius: 50px; font-weight: 700; margin-top: 20px; display: inline-block;
            box-shadow: 0 5px 15px rgba(255, 193, 7, 0.4);
        }
        .btn-main:hover { transform: translateY(-3px); background: #ffca2c; }

        /* --- üèÜ 3-COLUMN SCOREBOARD --- */
        .score-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
            position: relative;
            z-index: 10;
        }

        .score-card {
            background: white; border-radius: 20px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            padding: 25px;
            border-top: 5px solid transparent;
            transition: transform 0.3s;
            display: flex; flex-direction: column; /* ‡∏à‡∏±‡∏î Layout ‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏¢‡∏π‡πà‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î */
        }
        .score-card:hover { transform: translateY(-5px); }
        
        /* Border Colors per category */
        .score-card.exercise { border-color: #3b82f6; }
        .score-card.dorm { border-color: #a855f7; }
        .score-card.classroom { border-color: #10b981; }

        .card-header { text-align: center; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid #eee; }
        .card-header h3 { margin: 0; font-size: 1.3rem; font-weight: 800; color: #444; }
        .card-header i { font-size: 1.5rem; margin-bottom: 5px; display: block; }
        .exercise i { color: #3b82f6; }
        .dorm i { color: #a855f7; }
        .classroom i { color: #10b981; }

        /* Mini Podium in Card */
        .mini-podium { display: flex; justify-content: center; align-items: flex-end; gap: 8px; height: 140px; margin-bottom: 20px; }
        .podium-col { text-align: center; width: 30%; display: flex; flex-direction: column; align-items: center; justify-content: flex-end; }
        .p-bar { width: 100%; border-radius: 6px 6px 0 0; position: relative; color: #333; font-weight: bold; font-size: 0.8rem; padding-top: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        
        .rank-1 .p-bar { height: 100px; background: #ffd700; border: 2px solid #eec900; }
        .rank-2 .p-bar { height: 70px; background: #e0e0e0; }
        .rank-3 .p-bar { height: 50px; background: #cd7f32; opacity: 0.7; }
        
        .p-name { font-size: 0.8rem; margin-top: 5px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%; font-weight: 600; }
        
        /* Flag for Rank 1 */
        .flag-mini { position: absolute; top: -30px; left: 50%; transform: translateX(-50%); color: var(--green-flag); font-size: 1.5rem; animation: wave 2s infinite; }

        /* Top 5 List */
        .mini-list { font-size: 0.9rem; flex-grow: 1; margin-bottom: 15px; } /* ‡πÉ‡∏´‡πâ List ‡∏Ç‡∏¢‡∏≤‡∏¢‡πÄ‡∏ï‡πá‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà */
        .mini-item { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px dashed #eee; }
        .mini-item:last-child { border-bottom: none; }
        .mini-rank { color: #999; font-weight: bold; margin-right: 10px; min-width: 20px; }
        .mini-score { font-weight: bold; color: var(--primary); }

        /* NEW: ‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô */
        .btn-view-report {
            display: block; width: 100%; text-align: center;
            padding: 10px 0; border-radius: 12px;
            background-color: #f3f4f6; color: #666;
            font-size: 0.85rem; font-weight: 700;
            border: 1px solid #eee;
            margin-top: auto; /* ‡∏î‡∏±‡∏ô‡∏õ‡∏∏‡πà‡∏°‡πÑ‡∏õ‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î */
        }
        .btn-view-report:hover { background-color: #e5e7eb; color: #333; }
        .btn-view-report i { margin-right: 5px; }

        /* News Section */
        .section-title { text-align: center; margin: 40px 0 30px; font-size: 1.8rem; color: var(--dark); font-weight: 700; }
        .news-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; padding-bottom: 60px; }
        .news-card { background: var(--white); border-radius: 12px; overflow: hidden; box-shadow: var(--shadow); border: 1px solid #eee; }
        .news-card img { width: 100%; height: 200px; object-fit: cover; }
        .news-content { padding: 20px; }
        .date { font-size: 0.8rem; color: var(--secondary); font-weight: 700; margin-bottom: 5px; }

        @keyframes wave { 0%, 100% { transform: translateX(-50%) rotate(-5deg); } 50% { transform: translateX(-50%) rotate(5deg); } }
        
        @media (max-width: 768px) {
            .nav-content { flex-direction: column; gap: 10px; }
            .menu { flex-wrap: wrap; justify-content: center; }
            .hero h1 { font-size: 2rem; }
        }
    </style>
</head>
<body>
    <nav>
        <div class="container nav-content">
            <div class="logo">üè´ ‡∏™‡∏†‡∏≤<span>‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</span></div>
            <ul class="menu">
                <li><a href="index.html" class="active">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a></li>
                <li><a href="suggestion.html">‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô</a></li>
                <li><a href="team.html">‡∏Ñ‡∏ì‡∏∞‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£</a></li>
                <li><a href="register.html">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</a></li>
                <li><a href="login.html" class="btn-admin-nav">üîí Admin</a></li>
            </ul>
        </div>
    </nav>

    <header class="hero">
        <div class="container"><!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard | Student Council</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body { font-family: 'Sarabun', sans-serif; background-color: #f3f4f6; }
        .sidebar-link { display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; color: #4b5563; border-radius: 0.75rem; transition: all 200ms ease; cursor: pointer; font-weight: 500; text-decoration: none; }
        .sidebar-link:hover { background-color: #eff6ff; color: #2563eb; }
        .sidebar-link.active { background-color: #2563eb; color: #ffffff; box-shadow: 0 10px 15px -3px rgba(37,99,235,0.12); }
        .card { background-color: #ffffff; border-radius: 1rem; padding: 1.5rem; box-shadow: 0 1px 2px rgba(0,0,0,0.05); border: 1px solid #f3f4f6; }
        #sidebar { transition: all 0.3s ease-in-out; }
    </style>
</head>
<body class="flex h-screen overflow-hidden">

    <aside id="sidebar" class="w-64 bg-white border-r border-gray-200 flex flex-col p-6 z-20 flex-shrink-0 relative">
        <div class="flex flex-col items-center justify-center mb-8 pb-6 border-b border-gray-100">
            <div class="w-24 h-24 bg-white rounded-full shadow-lg flex items-center justify-center mb-3 overflow-hidden border-4 border-pink-100 relative group cursor-pointer p-1">
                <img src="RPK26 Logo.jfif" alt="RPK26 Logo" class="w-full h-full object-contain group-hover:scale-110 transition duration-500">
            </div>
            <h1 class="text-lg font-extrabold text-pink-800 tracking-wide text-center leading-tight">‡∏£‡∏≤‡∏ä‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ô‡∏∏‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå ‡πí‡πñ</h1>
            <p class="text-xs text-gray-400 font-medium bg-gray-100 px-2 py-1 rounded-full mt-2">Admin Panel</p>
        </div>

        <nav class="flex-1 space-y-2">
            <a onclick="switchTab('dashboard')" id="nav-dashboard" class="sidebar-link active">
                <i class="fas fa-chart-pie w-6 text-center"></i> Dashboard
            </a>
            <a onclick="switchTab('scores')" id="nav-scores" class="sidebar-link">
                <i class="fas fa-edit w-6 text-center"></i> ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
            </a>
            <a onclick="switchTab('suggestions')" id="nav-suggestions" class="sidebar-link">
                <i class="fas fa-inbox w-6 text-center"></i> ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô
            </a>
            <a onclick="switchTab('news')" id="nav-news" class="sidebar-link">
                <i class="fas fa-bullhorn w-6 text-center"></i> ‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£
            </a>
        </nav>

        <button onclick="logout()" class="flex items-center gap-3 px-4 py-3 text-red-500 hover:bg-red-50 rounded-xl mt-auto transition font-bold text-sm">
            <i class="fas fa-sign-out-alt"></i> ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
        </button>
    </aside>

    <main class="flex-1 flex flex-col h-screen overflow-hidden bg-gray-50 relative w-full">
        
        <header class="bg-white border-b h-16 flex items-center justify-between px-6 shadow-sm z-10">
            <div class="flex items-center gap-4">
                <button onclick="toggleSidebar()" class="p-2 rounded-lg hover:bg-gray-100 text-gray-600 transition">
                    <i class="fas fa-bars text-xl"></i>
                </button>
                <h2 class="text-lg font-bold text-gray-700 hidden md:block">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏†‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h2>
            </div>

            <div class="flex items-center gap-3">
                <button onclick="toggleFullScreen()" class="p-2 rounded-lg hover:bg-gray-100 text-gray-600 transition">
                    <i id="fullscreen-icon" class="fas fa-expand text-xl"></i>
                </button>
                <div class="flex items-center gap-3 pl-4 border-l">
                    <div class="text-right hidden md:block">
                        <p class="text-sm font-bold text-gray-700">‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö</p>
                        <p class="text-xs text-green-500">‚óè ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</p>
                    </div>
                    <div class="w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center overflow-hidden border-2 border-white shadow-sm">
                        <img src="https://upload.wikimedia.org/wikipedia/th/f/f8/%E0%B8%95%E0%B8%A3%E0%B8%B2%E0%B8%9B%E0%B8%A3%E0%B8%B0%E0%B8%88%E0%B8%B3%E0%B9%82%E0%B8%A3%E0%B8%87%E0%B9%80%E0%B8%A3%E0%B8%B5%E0%B8%A2%E0%B8%99%E0%B8%A3%E0%B8%B2%E0%B8%8A%E0%B8%9B%E0%B8%A3%E0%B8%B0%E0%B8%8A%E0%B8%B2%E0%B8%99%E0%B8%B8%E0%B9%80%E0%B8%84%E0%B8%A3%E0%B8%B0%E0%B8%AB%E0%B9%8C_26_%E0%B8%88%E0%B8%B1%E0%B8%87%E0%B8%AB%E0%B8%A7%E0%B8%B1%E0%B8%94%E0%B8%A5%E0%B8%B3%E0%B8%9E%E0%B8%B9%E0%B8%99.png" class="w-full h-full object-cover">
                    </div>
                </div>
            </div>
        </header>

        <div class="flex-1 overflow-y-auto p-4 md:p-8 space-y-8 relative">
            
            <div id="tab-dashboard" class="tab-content block space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="card hover:shadow-md transition border-l-4 border-blue-500">
                        <p class="text-gray-400 text-xs font-bold uppercase tracking-wider">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏° (‡∏´‡∏≠‡∏û‡∏±‡∏Å)</p>
                        <h3 class="text-3xl font-extrabold text-gray-800 mt-1" id="stat-dorm-score">0</h3>
                        <div class="mt-2 text-xs text-blue-500 font-bold"><i class="fas fa-check-circle"></i> ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</div>
                    </div>
                    <div class="card hover:shadow-md transition border-l-4 border-green-500">
                        <p class="text-gray-400 text-xs font-bold uppercase tracking-wider">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏° (‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô)</p>
                        <h3 class="text-3xl font-extrabold text-gray-800 mt-1" id="stat-class-score">0</h3>
                        <div class="mt-2 text-xs text-green-500 font-bold"><i class="fas fa-chart-line"></i> Active</div>
                    </div>
                    <div class="card hover:shadow-md transition border-l-4 border-purple-500 cursor-pointer" onclick="switchTab('suggestions')">
                        <p class="text-gray-400 text-xs font-bold uppercase tracking-wider">‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</p>
                        <h3 class="text-3xl font-extrabold text-gray-800 mt-1" id="stat-sug-count">0</h3>
                        <div class="mt-2 text-xs text-purple-500">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ ></div>
                    </div>
                    <div class="card hover:shadow-md transition border-l-4 border-orange-500 cursor-pointer" onclick="switchTab('news')">
                        <p class="text-gray-400 text-xs font-bold uppercase tracking-wider">‡∏Ç‡πà‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå</p>
                        <h3 class="text-3xl font-extrabold text-gray-800 mt-1" id="stat-news-count">0</h3>
                        <div class="mt-2 text-xs text-orange-500">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π ></div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="card col-span-1 lg:col-span-2">
                        <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                            <i class="fas fa-trophy text-yellow-500"></i> 5 ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏´‡∏≠‡∏û‡∏±‡∏Å‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
                        </h3>
                        <div class="relative h-72 w-full"><canvas id="barChart"></canvas></div>
                    </div>
                    
                    <div class="card col-span-1 flex flex-col items-center justify-center">
                        <h3 class="text-lg font-bold text-gray-800 mb-4 self-start">‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h3>
                        <div class="relative h-56 w-56"><canvas id="donutChart"></canvas></div>
                    </div>
                    
                    <div class="card col-span-1 lg:col-span-3">
                        <div class="flex flex-wrap items-center justify-between mb-4 gap-4">
                            <h3 class="text-lg font-bold text-gray-800 flex items-center gap-2">
                                <i class="fas fa-graduation-cap text-blue-500"></i> ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
                            </h3>
                            <div class="flex gap-2">
                                <select id="filter-grade" onchange="updateClassChart()" class="bg-gray-100 border-none text-sm rounded-lg px-3 py-2 font-bold text-gray-600 focus:ring-2 focus:ring-blue-200 outline-none cursor-pointer">
                                    <option value="all">üèÜ ‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô (Top 10)</option>
                                    <option value="‡∏°.1">‡∏°‡∏±‡∏ò‡∏¢‡∏° 1</option>
                                    <option value="‡∏°.2">‡∏°‡∏±‡∏ò‡∏¢‡∏° 2</option>
                                    <option value="‡∏°.3">‡∏°‡∏±‡∏ò‡∏¢‡∏° 3</option>
                                    <option value="‡∏°.4">‡∏°‡∏±‡∏ò‡∏¢‡∏° 4</option>
                                    <option value="‡∏°.5">‡∏°‡∏±‡∏ò‡∏¢‡∏° 5</option>
                                    <option value="‡∏°.6">‡∏°‡∏±‡∏ò‡∏¢‡∏° 6</option>
                                </select>
                                <select id="filter-period" onchange="updateClassChart()" class="bg-gray-100 border-none text-sm rounded-lg px-3 py-2 font-bold text-gray-600 focus:ring-2 focus:ring-blue-200 outline-none cursor-pointer">
                                    <option value="total">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°‡∏™‡∏∞‡∏™‡∏°</option>
                                    <option value="daily">üìÖ ‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</option>
                                    <option value="weekly">üìÜ ‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</option>
                                </select>
                            </div>
                        </div>
                        <div class="relative h-64 w-full"><canvas id="lineChart"></canvas></div>
                    </div>
                </div>
            </div>

            <div id="tab-scores" class="tab-content hidden space-y-6">
                <div class="card">
                    <div class="border-b pb-4 mb-4 flex flex-wrap gap-3">
                        <button onclick="loadScoreInputs('exercise')" id="btn-mode-exercise" class="px-5 py-2.5 rounded-lg bg-gray-100 hover:bg-blue-100 text-blue-700 font-bold transition flex items-center gap-2"><i class="fas fa-running"></i> ‡∏ï‡∏£‡∏ß‡∏à‡∏≠‡∏≠‡∏Å‡∏Å‡∏≤‡∏¢</button>
                        <button onclick="loadScoreInputs('dorm')" id="btn-mode-dorm" class="px-5 py-2.5 rounded-lg bg-gray-100 hover:bg-purple-100 text-purple-700 font-bold transition flex items-center gap-2"><i class="fas fa-bed"></i> ‡∏ï‡∏£‡∏ß‡∏à‡∏´‡∏≠‡∏ô‡∏≠‡∏ô</button>
                        <button onclick="loadScoreInputs('classroom')" id="btn-mode-classroom" class="px-5 py-2.5 rounded-lg bg-gray-100 hover:bg-green-100 text-green-700 font-bold transition flex items-center gap-2"><i class="fas fa-chalkboard"></i> ‡∏ï‡∏£‡∏ß‡∏à‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
                    </div>
                    <h3 id="score-title" class="text-xl font-bold text-gray-700 mb-4">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô</h3>
                    <form onsubmit="saveScores(event)">
                        <div id="admin-score-container" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 max-h-[60vh] overflow-y-auto p-1"></div>
                        <button id="btn-save-score" type="submit" class="hidden mt-6 w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 shadow-lg transition"><i class="fas fa-save mr-2"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                    </form>
                </div>
            </div>

            <div id="tab-suggestions" class="tab-content hidden">
                <div class="card">
                    <h2 class="text-xl font-bold mb-4">‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô</h2>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left border-collapse">
                            <thead><tr class="bg-gray-50 border-b"><th class="p-4 rounded-tl-lg">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠</th><th class="p-4">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</th><th class="p-4">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th><th class="p-4 rounded-tr-lg">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th></tr></thead>
                            <tbody id="suggestion-tbody" class="divide-y divide-gray-100"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="tab-news" class="tab-content hidden space-y-6">
                <div class="card">
                    <h3 class="text-lg font-bold mb-4">‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏Ç‡πà‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå</h3>
                    <form onsubmit="postNews(event)" class="space-y-4">
                        <input id="news-title" class="w-full p-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-blue-200 outline-none" placeholder="‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏Ç‡πà‡∏≤‡∏ß" required>
                        <textarea id="news-content" rows="3" class="w-full p-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-blue-200 outline-none" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î..." required></textarea>
                        <input id="news-image" class="w-full p-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-blue-200 outline-none" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)">
                        <button class="px-8 py-2 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition">‡πÇ‡∏û‡∏™‡∏ï‡πå</button>
                    </form>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="news-grid-admin"></div>
            </div>

        </div>
    </main>

    <script>
        const API_BASE = '/api';
        let allScoreData = [];
        let currentAdminMode = '';
        let classChartInstance = null;

        function toggleSidebar() { const s = document.getElementById('sidebar'); s.classList.toggle('hidden'); }
        function toggleFullScreen() {
            if (!document.fullscreenElement) { document.documentElement.requestFullscreen(); document.getElementById('fullscreen-icon').classList.replace('fa-expand', 'fa-compress'); } 
            else { if (document.exitFullscreen) document.exitFullscreen(); document.getElementById('fullscreen-icon').classList.replace('fa-compress', 'fa-expand'); }
        }

        async function checkAuth() { try { const res = await fetch(`${API_BASE}/check-auth`); const data = await res.json(); if (!data.authenticated) location.href='login.html'; else initDashboard(); } catch { location.href='login.html'; } }
        checkAuth();

        async function initDashboard() {
            const [scRes, sgRes, nwRes] = await Promise.all([fetch(`${API_BASE}/scores`), fetch(`${API_BASE}/suggestions`), fetch(`${API_BASE}/news`)]);
            allScoreData = await scRes.json();
            const suggestions = await sgRes.json();
            const news = await nwRes.json();
            updateStats(allScoreData, suggestions, news);
            renderCharts(allScoreData);
            renderSuggestions(suggestions);
            renderNews(news);
        }

        function switchTab(t) {
            document.querySelectorAll('.tab-content').forEach(e=>e.classList.add('hidden')); document.getElementById(`tab-${t}`).classList.remove('hidden');
            document.querySelectorAll('.sidebar-link').forEach(e=>e.classList.remove('active')); document.getElementById(`nav-${t}`).classList.add('active');
        }
        async function logout() { await fetch(`${API_BASE}/logout`, {method:'POST'}); location.href='login.html'; }

        function updateStats(scores, sugs, news) {
            const tDorm = scores.filter(s=>s.type==='dorm').reduce((a,b)=>a+(b.points_exercise||0)+(b.points_dorm||0),0);
            const tClass = scores.filter(s=>s.type==='classroom').reduce((a,b)=>a+(b.points_class||0),0);
            document.getElementById('stat-dorm-score').innerText = tDorm.toLocaleString();
            document.getElementById('stat-class-score').innerText = tClass.toLocaleString();
            document.getElementById('stat-sug-count').innerText = sugs.length;
            document.getElementById('stat-news-count').innerText = news.length;
        }

        // Charts Logic
        function renderCharts(data) {
            // Bar Chart (Dorm) - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏µ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
            const dorms = data.filter(d=>d.type==='dorm').sort((a,b)=>(b.points_exercise+b.points_dorm)-(a.points_exercise+a.points_dorm)).slice(0,5);
            new Chart(document.getElementById('barChart'), { 
                type:'bar', 
                data:{
                    labels:dorms.map(d=>d.name), 
                    datasets:[{
                        label:'‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô', 
                        data:dorms.map(d=>(d.points_exercise||0)+(d.points_dorm||0)), 
                        // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å‡∏™‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏£‡∏¢‡πå‡∏Ç‡∏≠‡∏á‡∏™‡∏µ
                        backgroundColor: [
                            '#10b981', // ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 1: ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß
                            '#f59e0b', // ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 2: ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á
                            '#3b82f6', // ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 3: ‡∏™‡∏µ‡∏ü‡πâ‡∏≤
                            '#3b82f6', // ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 4: ‡∏™‡∏µ‡∏ü‡πâ‡∏≤
                            '#3b82f6'  // ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 5: ‡∏™‡∏µ‡∏ü‡πâ‡∏≤
                        ],
                        borderRadius:6
                    }]
                }, 
                options:{responsive:true, maintainAspectRatio:false, plugins:{legend:{display:false}}, scales:{y:{beginAtZero:true}, x:{grid:{display:false}}}} 
            });
            
            // Donut Chart
            const tEx = data.filter(d=>d.type==='dorm').reduce((a,b)=>a+(b.points_exercise||0),0);
            const tDo = data.filter(d=>d.type==='dorm').reduce((a,b)=>a+(b.points_dorm||0),0);
            const tCl = data.filter(d=>d.type==='classroom').reduce((a,b)=>a+(b.points_class||0),0);
            new Chart(document.getElementById('donutChart'), { type:'doughnut', data:{labels:['‡∏≠‡∏≠‡∏Å‡∏Å‡∏≤‡∏¢','‡∏´‡∏≠‡∏ô‡∏≠‡∏ô','‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô'], datasets:[{data:[tEx,tDo,tCl], backgroundColor:['#3b82f6','#a855f7','#f59e0b'], borderWidth:0, hoverOffset:5}]}, options:{cutout:'75%', plugins:{legend:{display:false}}} });

            // Bar Chart (Classroom)
            updateClassChart();
        }

        function updateClassChart() {
            const gradeFilter = document.getElementById('filter-grade').value;
            let filteredData = allScoreData.filter(d => d.type === 'classroom');
            if (gradeFilter !== 'all') filteredData = filteredData.filter(d => d.name.includes(gradeFilter));
            filteredData.sort((a, b) => (b.points_class || 0) - (a.points_class || 0));
            if (gradeFilter === 'all') filteredData = filteredData.slice(0, 10);

            const labels = filteredData.map(c => c.name);
            const scores = filteredData.map(c => c.points_class || 0);

            if (classChartInstance) classChartInstance.destroy();

            const ctx = document.getElementById('lineChart').getContext('2d');
            classChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô',
                        data: scores,
                        backgroundColor: '#bfdbfe',
                        borderRadius: 4,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: { callbacks: { label: function(context) { return ` ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ${context.raw}`; } } }
                    },
                    scales: {
                        y: { beginAtZero: true, grid: { borderDash: [2, 4] } },
                        x: { grid: { display: false } }
                    }
                }
            });
        }

        // Score Input Logic
        function loadScoreInputs(m) {
            currentAdminMode=m; const con=document.getElementById('admin-score-container'); const tit=document.getElementById('score-title');
            document.querySelectorAll('#tab-scores button').forEach(b=>b.classList.remove('ring-2','ring-offset-2','bg-white','shadow-md'));
            document.getElementById(`btn-mode-${m}`).classList.add('ring-2','ring-offset-2','bg-white','shadow-md');
            let fil=[], fld=''; 
            if(m==='classroom'){ fil=allScoreData.filter(d=>d.type==='classroom'); fld='points_class'; tit.innerHTML='<i class="fas fa-chalkboard text-green-600"></i> ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô'; }
            else { fil=allScoreData.filter(d=>d.type==='dorm'); fld=m==='exercise'?'points_exercise':'points_dorm'; tit.innerHTML=m==='exercise'?'<i class="fas fa-running text-blue-600"></i> ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏≠‡∏≠‡∏Å‡∏Å‡∏≤‡∏¢':'<i class="fas fa-bed text-purple-600"></i> ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏´‡∏≠‡∏ô‡∏≠‡∏ô'; }
            fil.sort((a,b)=>a.name.localeCompare(b.name,undefined,{numeric:true}));
            con.innerHTML=''; fil.forEach(i=>{ con.innerHTML+=`<div class="bg-gray-50 p-3 rounded-xl border hover:border-blue-400 transition"><label class="text-xs font-bold text-gray-500 block mb-1 uppercase">${i.name}</label><input type="number" class="score-input w-full bg-white border border-gray-200 rounded-lg p-2 text-center font-bold text-xl text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 transition" data-id="${i._id}" value="${i[fld]||0}"></div>`; });
            document.getElementById('btn-save-score').classList.remove('hidden');
        }

        async function saveScores(e) { e.preventDefault(); const inps=document.querySelectorAll('.score-input'); const upds=[]; let fld=currentAdminMode==='classroom'?'points_class':(currentAdminMode==='exercise'?'points_exercise':'points_dorm'); inps.forEach(i=>upds.push({_id:i.dataset.id, field:fld, value:i.value})); await fetch(`${API_BASE}/scores`, {method:'PUT', headers:{'Content-Type':'application/json'}, body:JSON.stringify(upds)}); alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ ‚úÖ'); initDashboard(); }
        
        // Suggestions Logic
        function renderSuggestions(d) { document.getElementById('suggestion-tbody').innerHTML=d.map(s=>`<tr class="border-b hover:bg-gray-50"><td class="p-4 font-bold text-gray-700">${s.topic}</td><td class="p-4 text-sm text-gray-500">${s.category}</td><td class="p-4"><span class="px-2 py-1 rounded-md text-xs font-bold ${s.status==='resolved'?'bg-green-100 text-green-700':'bg-yellow-100 text-yellow-700'}">${s.status}</span></td><td class="p-4">${s.status!=='resolved'?`<button onclick="updSug('${s._id}','resolved')" class="text-green-600 hover:bg-green-50 px-3 py-1 rounded font-bold text-sm transition">‡∏à‡∏ö‡∏á‡∏≤‡∏ô</button>`:'<i class="fas fa-check-circle text-green-500 text-lg"></i>'}</td></tr>`).join(''); }
        async function updSug(id,st) { await fetch(`${API_BASE}/suggestions/${id}`, {method:'PUT', headers:{'Content-Type':'application/json'}, body:JSON.stringify({status:st})}); initDashboard(); }
        
        // News Logic
        function renderNews(d) { document.getElementById('news-grid-admin').innerHTML=d.map(n=>`<div class="bg-white p-4 rounded-xl border shadow-sm relative group hover:shadow-md transition"><button onclick="delNews('${n._id}')" class="absolute top-2 right-2 bg-red-50 text-red-500 p-2 rounded-full opacity-0 group-hover:opacity-100 transition"><i class="fas fa-trash"></i></button><h4 class="font-bold text-gray-800 mb-2">${n.title}</h4><p class="text-sm text-gray-500 truncate">${n.content}</p></div>`).join(''); }
        async function postNews(e) { e.preventDefault(); await fetch(`${API_BASE}/news`, {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({title:document.getElementById('news-title').value, content:document.getElementById('news-content').value, image:document.getElementById('news-image').value})}); alert('‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÅ‡∏•‡πâ‡∏ß'); initDashboard(); }
        async function delNews(id) { if(confirm('‡∏•‡∏ö?')) { await fetch(`${API_BASE}/news/${id}`, {method:'DELETE'}); initDashboard(); } }
    </script>
</body>
</html>
            <h1>‡∏™‡∏†‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡∏£‡∏∏‡πà‡∏ô‡∏ó‡∏µ‡πà 26</h1>
            <p>‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏£‡∏≤‡∏ä‡∏™‡∏á‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå 26<br>‡∏£‡πà‡∏ß‡∏°‡∏Ñ‡∏¥‡∏î ‡∏£‡πà‡∏ß‡∏°‡∏ó‡∏≥ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡πâ‡∏ô‡πà‡∏≤‡∏≠‡∏¢‡∏π‡πà</p>
            <a href="suggestion.html" class="btn-main">üó≥Ô∏è ‡∏™‡πà‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</a>
        </div>
    </header>

    <div class="container">
        
        <div class="section-title" style="margin-top: 80px; margin-bottom: 20px;">
            <i class="fas fa-trophy text-yellow-500"></i> ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
        </div>

        <div class="score-grid">
            
            <div class="score-card exercise">
                <div class="card-header exercise">
                    <i class="fas fa-running"></i>
                    <h3>‡∏ï‡∏£‡∏ß‡∏à‡∏≠‡∏≠‡∏Å‡∏Å‡∏≤‡∏¢</h3>
                </div>
                <div id="podium-exercise" class="mini-podium">Loading...</div>
                <div id="list-exercise" class="mini-list"></div>
                <a href="weekly-report.html" class="btn-view-report"><i class="fas fa-table"></i> ‡∏î‡∏π‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</a>
            </div>

            <div class="score-card dorm">
                <div class="card-header dorm">
                    <i class="fas fa-bed"></i>
                    <h3>‡∏ï‡∏£‡∏ß‡∏à‡∏´‡∏≠‡∏ô‡∏≠‡∏ô</h3>
                </div>
                <div id="podium-dorm" class="mini-podium">Loading...</div>
                <div id="list-dorm" class="mini-list"></div>
                <a href="weekly-report.html" class="btn-view-report"><i class="fas fa-table"></i> ‡∏î‡∏π‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</a>
            </div>

            <div class="score-card classroom">
                <div class="card-header classroom">
                    <i class="fas fa-chalkboard"></i>
                    <h3>‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏∞‡∏≠‡∏≤‡∏î</h3>
                </div>
                <div id="podium-classroom" class="mini-podium">Loading...</div>
                <div id="list-classroom" class="mini-list"></div>
                <a href="classroom-weekly.html" class="btn-view-report"><i class="fas fa-table"></i> ‡∏î‡∏π‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</a>
            </div>

        </div>

        <h2 class="section-title">‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£ <span>‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå</span></h2>
        <div id="news-container" class="news-grid"><p style="text-align:center; width:100%;">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p></div>
    </div>

    <script>
        const API_URL = 'https://school-council-26.onrender.com/api/scores';
        let allScores = [];

        async function initScores() {
            try {
                // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å Server
                const res = await fetch(API_URL);
                allScores = await res.json();
                
                // ‡πÄ‡∏£‡∏ô‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á 3 ‡∏´‡∏°‡∏ß‡∏î
                renderCategory('exercise', 'points_exercise', 'dorm');
                renderCategory('dorm', 'points_dorm', 'dorm');
                renderCategory('classroom', 'points_class', 'classroom');

            } catch (err) {
                console.error(err);
                document.getElementById('list-exercise').innerHTML = "‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ";
            }
        }

        function renderCategory(elementId, key, typeFilter) {
            // 1. ‡∏Å‡∏£‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö
            let filtered = allScores.filter(d => d.type === typeFilter);
            filtered.sort((a, b) => (b[key]||0) - (a[key]||0));

            const podiumEl = document.getElementById(`podium-${elementId}`);
            const listEl = document.getElementById(`list-${elementId}`);
            
            if (filtered.length === 0) {
                podiumEl.innerHTML = '<span style="font-size:0.8rem; color:#999; align-self:center;">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</span>';
                return;
            }

            // 2. ‡∏™‡∏£‡πâ‡∏≤‡∏á Podium (Top 3)
            let podiumHTML = '';
            
            // Rank 2 (Left)
            if(filtered[1]) {
                podiumHTML += `
                    <div class="podium-col rank-2">
                        <div class="p-name">${filtered[1].name}</div>
                        <div class="p-bar">${filtered[1][key]}</div>
                    </div>`;
            } else podiumHTML += `<div class="podium-col"></div>`;

            // Rank 1 (Center)
            if(filtered[0]) {
                podiumHTML += `
                    <div class="podium-col rank-1">
                        <div class="p-bar">
                            <i class="fas fa-flag flag-mini"></i>
                            ${filtered[0][key]}
                        </div>
                        <div class="p-name" style="font-weight:800; color:var(--primary);">${filtered[0].name}</div>
                    </div>`;
            }

            // Rank 3 (Right)
            if(filtered[2]) {
                podiumHTML += `
                    <div class="podium-col rank-3">
                        <div class="p-name">${filtered[2].name}</div>
                        <div class="p-bar">${filtered[2][key]}</div>
                    </div>`;
            } else podiumHTML += `<div class="podium-col"></div>`;

            podiumEl.innerHTML = podiumHTML;

            // 3. ‡∏™‡∏£‡πâ‡∏≤‡∏á List (‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 4-5)
            let listHTML = '';
            const rest = filtered.slice(3, 5); // ‡πÄ‡∏≠‡∏≤‡πÅ‡∏Ñ‡πà 2 ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
            if(rest.length > 0) {
                rest.forEach((item, idx) => {
                    listHTML += `
                        <div class="mini-item">
                            <div><span class="mini-rank">#${idx + 4}</span> ${item.name}</div>
                            <div class="mini-score">${item[key]}</div>
                        </div>
                    `;
                });
            } else {
                listHTML = '<div style="text-align:center; color:#ccc; font-size:0.8rem; margin-top:10px;">- End -</div>';
            }
            listEl.innerHTML = listHTML;
        }

        async function loadNews() {
            try {
                // ‡∏î‡∏∂‡∏á‡∏Ç‡πà‡∏≤‡∏ß‡∏à‡∏£‡∏¥‡∏á (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ API) ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ Mock ‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ
                const res = await fetch('https://school-council-26.onrender.com/api/news');
                const data = await res.json();
                const container = document.getElementById('news-container');
                container.innerHTML = '';
                if(data.length === 0) return container.innerHTML = '<p style="text-align:center; width:100%;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πà‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</p>';
                data.forEach(news => {
                    const date = new Date(news.date).toLocaleDateString('th-TH');
                    container.innerHTML += `
                        <div class="news-card">
                            <img src="${news.image || 'https://via.placeholder.com/400'}" alt="news">
                            <div class="news-content">
                                <div class="date">${date}</div>
                                <h3>${news.title}</h3>
                                <p>${news.content.substring(0,90)}...</p>
                            </div>
                        </div>`;
                });
            } catch { 
                 // Fallback if news API fails
                 document.getElementById('news-container').innerHTML = '<p style="text-align:center; width:100%;">‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πà‡∏≤‡∏ß‡πÑ‡∏î‡πâ</p>';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            initScores();
            loadNews();
        });
    </script>
</body>
</html>